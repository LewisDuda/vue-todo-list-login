import{_ as Z,S as K,s as m,g as W,i as U,r as v,a as C,o as n,c as t,b as i,d as u,e as y,n as E,w as f,v as w,h as P,t as h,f as N}from"./index.4a2fd5bc.js";import{V as L}from"./vue-writer.esm.78c620cf.js";const M={components:{VueWriter:L},directives:{focus:{mounted(l){l.focus()}}},setup(){const l=K.mixin({toast:!0,position:"top",iconColor:"white",customClass:{popup:"colored-toast"},showConfirmButton:!1,timer:5e3,timerProgressBar:!0}),e=m.state.auth,c=W(!1),s=U(()=>e.user),p=U(()=>e.user.Name).value,k=["Hello "+p+", would you like to change your profile?"],r=v({Email:!1,Username:!1,Password:!1}),a=v({Email:"",Username:"",OldPassword:"",NewPassword:"",ConfirmNewPassword:""});function o(){c.value=c.value==!1?c.value=!0:c.value=!1}function g(){m.dispatch("auth/userSignout")}function O(){r.Email=!0}async function b(){await m.dispatch("auth/registerEmailCheck",a.Email);const d=U(()=>e.isEmailUsed);if(!a.Email)return l.fire({icon:"error",title:"Oops, Email required."});if(!A(a.Email))return l.fire({icon:"error",title:"Valid email required."});if(d.value)return l.fire({icon:"error",title:"This email is occupied."});s.value.Email=a.Email,m.dispatch("auth/userUpdateProfile",s),r.Email=!1,a.Email=""}function x(){r.Email=!1,a.Email=""}function V(){r.Username=!0}function H(){if(!a.Username)return l.fire({icon:"error",title:"Oops, Username required."});s.value.Name=a.Username,m.dispatch("auth/userUpdateProfile",s),r.Username=!1,a.Username=""}function B(){r.Username=!1,a.Username=""}function D(){r.Password=!0}function S(){if(!a.OldPassword||!a.NewPassword||!a.ConfirmNewPassword)return l.fire({icon:"error",title:"Oops, Old password, New password and Confirm new password is required."});if(a.OldPassword==a.NewPassword)return l.fire({icon:"error",title:"Oops, Old password and New password can not be the same."});if(!T(a.NewPassword))return l.fire({icon:"error",title:"Oops, please reconfirm your New password.Please use 8 or more characters with a mix of letters, numbers, symbols & at least one uppercase letter"});if(!z(a.ConfirmNewPassword))return l.fire({icon:"error",title:"Oops, please reconfirm your New password or Confirm new password."});const d={OldPassword:a.OldPassword,NewPassword:a.NewPassword};m.dispatch("auth/userUpdatePassword",d),r.Password=!1,a.OldPassword="",a.NewPassword="",a.ConfirmNewPassword=""}function q(){r.Password=!1}function A(d){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(d)}function T(d){return/^(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,16}$/.test(d)}function z(d){const _=a.NewPassword;return d===_}return{isUserDetail:c,username:p,welcomeArr:k,user:s,isEdit:r,edit:a,showDetail:o,singout:g,editEmailHandler:O,confirmEditEmail:b,cancelEditEmail:x,editUsernameHandler:V,confirmEditUsername:H,cancelEditUsername:B,editPasswordHandler:D,cancelEditPassword:q,confirmEditPassword:S}}},R={class:"profile"},Y=N("Todo List"),j=i("i",{class:"fa-solid fa-user-large"},null,-1),F=[j],G=i("i",{class:"fa-solid fa-address-card"},null,-1),I=i("h4",null,"Your Profile",-1),J=i("i",{class:"fa-solid fa-right-from-bracket"},null,-1),Q=i("h4",null,"Sign out",-1),X=[J,Q],$={class:"profile-form"},ss=i("h3",null,"Email:",-1),es={key:1},os={key:2,class:"editBtn-gruop"},is=i("h3",null,"Username:",-1),as={key:1},rs={key:2,class:"editBtn-gruop"},ns={key:0,class:"detail"},ts=i("h3",{class:"title"},"Change password",-1),ls={class:"sub-detail"},ds=i("h3",null,"Old password:",-1),cs={class:"sub-detail"},ms=i("h3",null,"New password:",-1),fs={class:"sub-detail"},ws=i("h3",null,"Confirm new password:",-1),us={key:1},Es=i("h3",null,"Password:",-1),Ps=i("input",{type:"password",value:"password",disabled:""},null,-1),ps=[Es,Ps],_s={key:2,class:"passwordBtn-gruop"};function Us(l,e,c,s,p,k){const r=C("router-link"),a=C("VueWriter");return n(),t("div",R,[i("header",null,[u(r,{to:"/home/all",class:"logo"},{default:y(()=>[Y]),_:1}),u(a,{array:s.welcomeArr,eraseSpeed:50,typeSpeed:100,delay:1e3,start:1500},null,8,["array"]),i("div",{class:"user-icon",onClick:e[0]||(e[0]=(...o)=>s.showDetail&&s.showDetail(...o))},F),i("div",{class:E(["user-detail",{show:s.isUserDetail}])},[u(r,{to:"/home/all",class:"user-name"},{default:y(()=>[N(h(s.username),1)]),_:1}),u(r,{to:"/profile",class:"user-info"},{default:y(()=>[G,I]),_:1}),i("a",{class:"sign-out",onClick:e[1]||(e[1]=(...o)=>s.singout&&s.singout(...o))},X)],2)]),i("div",$,[i("article",{class:E(["email",[s.isEdit.Password?"editPassword":""]])},[ss,s.isEdit.Email?f((n(),t("input",{key:0,type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>s.edit.Email=o),placeholder:"Please Enter your new email...",onKeyup:[e[3]||(e[3]=P((...o)=>s.confirmEditEmail&&s.confirmEditEmail(...o),["enter"])),e[4]||(e[4]=P((...o)=>s.cancelEditEmail&&s.cancelEditEmail(...o),["esc"]))]},null,544)),[[w,s.edit.Email]]):(n(),t("p",es,h(s.user.Email),1)),s.isEdit.Email?(n(),t("div",os,[i("i",{class:"fa-solid fa-rectangle-xmark",onClick:e[5]||(e[5]=(...o)=>s.cancelEditEmail&&s.cancelEditEmail(...o))}),i("i",{class:"fa-solid fa-square-check",onClick:e[6]||(e[6]=o=>s.confirmEditEmail(s.user))})])):(n(),t("i",{key:3,class:"fa-solid fa-pen-nib",onClick:e[7]||(e[7]=(...o)=>s.editEmailHandler&&s.editEmailHandler(...o))}))],2),i("article",{class:E(["username",[s.isEdit.Password?"editPassword":""]])},[is,s.isEdit.Username?f((n(),t("input",{key:0,type:"text","onUpdate:modelValue":e[8]||(e[8]=o=>s.edit.Username=o),placeholder:"Please Enter your new username...",onKeyup:[e[9]||(e[9]=P((...o)=>s.confirmEditUsername&&s.confirmEditUsername(...o),["enter"])),e[10]||(e[10]=P((...o)=>s.cancelEditUsername&&s.cancelEditUsername(...o),["esc"]))]},null,544)),[[w,s.edit.Username]]):(n(),t("p",as,h(s.user.Name),1)),s.isEdit.Username?(n(),t("div",rs,[i("i",{class:"fa-solid fa-rectangle-xmark",onClick:e[11]||(e[11]=(...o)=>s.cancelEditUsername&&s.cancelEditUsername(...o))}),i("i",{class:"fa-solid fa-square-check",onClick:e[12]||(e[12]=(...o)=>s.confirmEditUsername&&s.confirmEditUsername(...o))})])):(n(),t("i",{key:3,class:"fa-solid fa-pen-nib",onClick:e[13]||(e[13]=(...o)=>s.editUsernameHandler&&s.editUsernameHandler(...o))}))],2),i("article",{class:E(["password",[s.isEdit.Password?"editPassword":""]])},[s.isEdit.Password?(n(),t("div",ns,[ts,i("div",ls,[ds,f(i("input",{class:"old-password",type:"password","onUpdate:modelValue":e[14]||(e[14]=o=>s.edit.OldPassword=o)},null,512),[[w,s.edit.OldPassword]])]),i("div",cs,[ms,f(i("input",{class:"new-password",type:"password","onUpdate:modelValue":e[15]||(e[15]=o=>s.edit.NewPassword=o)},null,512),[[w,s.edit.NewPassword]])]),i("div",fs,[ws,f(i("input",{class:"confirm-password",type:"password","onUpdate:modelValue":e[16]||(e[16]=o=>s.edit.ConfirmNewPassword=o)},null,512),[[w,s.edit.ConfirmNewPassword]])])])):(n(),t("div",us,ps)),s.isEdit.Password?(n(),t("div",_s,[i("button",{class:"cancel",onClick:e[17]||(e[17]=(...o)=>s.cancelEditPassword&&s.cancelEditPassword(...o))}," cancel "),i("button",{class:"confirm",onClick:e[18]||(e[18]=(...o)=>s.confirmEditPassword&&s.confirmEditPassword(...o))}," confirm ")])):(n(),t("i",{key:3,class:"fa-solid fa-pen-nib",onClick:e[19]||(e[19]=(...o)=>s.editPasswordHandler&&s.editPasswordHandler(...o))}))],2)])])}const ks=Z(M,[["render",Us]]);export{ks as default};
